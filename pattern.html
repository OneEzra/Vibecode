<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pattern Drawing Studio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        h1 {
            text-align: center;
            color: #667eea;
            padding: 20px;
            font-size: 2em;
            border-bottom: 2px solid #e0e0e0;
        }

        .main-content {
            display: flex;
            min-height: 80vh;
        }

        .sidebar {
            width: 320px;
            background: #f8f9ff;
            padding: 20px;
            border-right: 2px solid #e0e0e0;
            overflow-y: auto;
            max-height: 80vh;
        }

        .canvas-area {
            flex: 1;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f0f0f0;
        }

        canvas {
            border: 2px solid #667eea;
            border-radius: 10px;
            background: white;
            cursor: crosshair;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .control-group {
            margin-bottom: 25px;
        }

        .control-group h3 {
            color: #667eea;
            font-size: 1.1em;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .pattern-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 10px;
        }

        .pattern-btn {
            padding: 10px 8px;
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.3s;
            color: #667eea;
            font-weight: 500;
        }

        .pattern-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .pattern-btn.active {
            background: #667eea;
            color: white;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .mode-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .mode-btn {
            flex: 1;
            padding: 12px;
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            color: #667eea;
        }

        .mode-btn.active {
            background: #667eea;
            color: white;
        }

        label {
            display: block;
            color: #666;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 5px;
            background: #d3d3d3;
            outline: none;
            margin-top: 5px;
        }

        input[type="color"] {
            width: 60px;
            height: 40px;
            border: 2px solid #667eea;
            border-radius: 8px;
            cursor: pointer;
        }

        input[type="text"], select {
            width: 100%;
            padding: 10px;
            border: 2px solid #d0d0d0;
            border-radius: 8px;
            font-size: 0.95em;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #e0e0e0;
        }

        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1em;
        }

        .btn-clear {
            background: #ef4444;
            color: white;
        }

        .btn-clear:hover {
            background: #dc2626;
            transform: translateY(-2px);
        }

        .btn-save {
            background: #10b981;
            color: white;
        }

        .btn-save:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        .btn-home {
            background: #667eea;
            color: white;
            width: 100%;
            margin-bottom: 20px;
        }

        .btn-home:hover {
            background: #764ba2;
        }

        .color-input-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .color-input-group input[type="text"] {
            flex: 1;
        }

        @media (max-width: 1024px) {
            .main-content {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                max-height: none;
            }

            .pattern-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (max-width: 768px) {
            .pattern-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® Pattern Drawing Studio</h1>
        
        <div class="main-content">
            <div class="sidebar">
                <button class="btn btn-home" onclick="window.location.href='index.html'">‚Üê Back to Home</button>

                <div class="mode-buttons">
                    <button class="mode-btn active" id="drawMode" onclick="setMode('draw')">üé® Draw</button>
                    <button class="mode-btn" id="textMode" onclick="setMode('text')">üìù Text</button>
                </div>

                <div id="drawControls">
                    <div class="control-group">
                        <h3>Patterns (25)</h3>
                        <div class="pattern-grid" id="patternGrid"></div>
                    </div>

                    <div class="control-group">
                        <label>Brush Size: <span id="brushSizeValue">40</span>px</label>
                        <input type="range" id="brushSize" min="10" max="150" value="40" oninput="updateBrushSize(this.value)">
                    </div>
                </div>

                <div id="textControls" style="display: none;">
                    <div class="control-group">
                        <label>Font Family</label>
                        <select id="fontFamily" onchange="updateFont()">
                            <option>Arial</option>
                            <option>Georgia</option>
                            <option>Times New Roman</option>
                            <option>Courier New</option>
                            <option>Verdana</option>
                            <option>Comic Sans MS</option>
                            <option>Impact</option>
                            <option>Trebuchet MS</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label>Font Size: <span id="fontSizeValue">48</span>px</label>
                        <input type="range" id="fontSize" min="20" max="120" value="48" oninput="updateFontSize(this.value)">
                    </div>
                </div>

                <div class="control-group">
                    <label>Color</label>
                    <div class="color-input-group">
                        <input type="color" id="patternColor" value="#000000" onchange="updateColor(this.value)">
                        <input type="text" id="colorText" value="#000000" onchange="updateColor(this.value)">
                    </div>
                </div>

                <div class="control-group">
                    <label>Opacity: <span id="opacityValue">100</span>%</label>
                    <input type="range" id="opacity" min="10" max="100" value="100" oninput="updateOpacity(this.value)">
                </div>

                <div class="action-buttons">
                    <button class="btn btn-clear" onclick="clearCanvas()">üóëÔ∏è Clear</button>
                    <button class="btn btn-save" onclick="saveImage()">üíæ Save</button>
                </div>
            </div>

            <div class="canvas-area">
                <canvas id="canvas" width="800" height="600"></canvas>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let isDrawing = false;
        let currentMode = 'draw';
        let selectedPattern = 'dots';
        let patternColor = '#000000';
        let opacity = 1.0;
        let brushSize = 40;
        let selectedFont = 'Arial';
        let fontSize = 48;

        // Pattern definitions
        const patterns = [
            'dots', 'circles', 'squares', 'triangles', 'hexagons', 'stars', 
            'waves', 'zigzag', 'diamonds', 'crosshatch', 'spirals', 'hearts',
            'scales', 'grid', 'diagonal', 'bubbles', 'leaves', 'arrows',
            'plus', 'mandala', 'checkerboard', 'brick', 'honeycomb', 
            'quatrefoil', 'moroccan'
        ];

        // Create pattern buttons
        const patternGrid = document.getElementById('patternGrid');
        patterns.forEach(pattern => {
            const btn = document.createElement('button');
            btn.className = 'pattern-btn';
            if (pattern === 'dots') btn.classList.add('active');
            btn.textContent = pattern.charAt(0).toUpperCase() + pattern.slice(1);
            btn.onclick = () => selectPattern(pattern, btn);
            patternGrid.appendChild(btn);
        });

        function selectPattern(pattern, btn) {
            document.querySelectorAll('.pattern-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            selectedPattern = pattern;
        }

        function setMode(mode) {
            currentMode = mode;
            document.getElementById('drawMode').classList.toggle('active', mode === 'draw');
            document.getElementById('textMode').classList.toggle('active', mode === 'text');
            document.getElementById('drawControls').style.display = mode === 'draw' ? 'block' : 'none';
            document.getElementById('textControls').style.display = mode === 'text' ? 'block' : 'none';
        }

        function updateBrushSize(value) {
            brushSize = parseInt(value);
            document.getElementById('brushSizeValue').textContent = value;
        }

        function updateColor(value) {
            patternColor = value;
            document.getElementById('patternColor').value = value;
            document.getElementById('colorText').value = value;
        }

        function updateOpacity(value) {
            opacity = parseInt(value) / 100;
            document.getElementById('opacityValue').textContent = value;
        }

        function updateFont() {
            selectedFont = document.getElementById('fontFamily').value;
        }

        function updateFontSize(value) {
            fontSize = parseInt(value);
            document.getElementById('fontSizeValue').textContent = value;
        }

        // Drawing functions
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseleave', stopDrawing);

        function startDrawing(e) {
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            if (currentMode === 'text') {
                const text = prompt('Enter text:');
                if (text) {
                    ctx.font = `${fontSize}px ${selectedFont}`;
                    ctx.fillStyle = patternColor;
                    ctx.globalAlpha = opacity;
                    ctx.fillText(text, x, y);
                    ctx.globalAlpha = 1;
                }
            } else {
                draw(e);
            }
        }

        function draw(e) {
            if (!isDrawing || currentMode === 'text') return;
            
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            drawPattern(ctx, x, y, brushSize, patternColor, opacity);
        }

        function stopDrawing() {
            isDrawing = false;
        }

        function drawPattern(ctx, x, y, size, color, alpha) {
            ctx.globalAlpha = alpha;
            
            switch(selectedPattern) {
                case 'dots':
                    drawDots(ctx, x, y, size, color);
                    break;
                case 'circles':
                    drawCircles(ctx, x, y, size, color);
                    break;
                case 'squares':
                    drawSquares(ctx, x, y, size, color);
                    break;
                case 'triangles':
                    drawTriangles(ctx, x, y, size, color);
                    break;
                case 'hexagons':
                    drawHexagons(ctx, x, y, size, color);
                    break;
                case 'stars':
                    drawStars(ctx, x, y, size, color);
                    break;
                case 'waves':
                    drawWaves(ctx, x, y, size, color);
                    break;
                case 'zigzag':
                    drawZigzag(ctx, x, y, size, color);
                    break;
                case 'diamonds':
                    drawDiamonds(ctx, x, y, size, color);
                    break;
                case 'crosshatch':
                    drawCrosshatch(ctx, x, y, size, color);
                    break;
                case 'spirals':
                    drawSpirals(ctx, x, y, size, color);
                    break;
                case 'hearts':
                    drawHearts(ctx, x, y, size, color);
                    break;
                case 'scales':
                    drawScales(ctx, x, y, size, color);
                    break;
                case 'grid':
                    drawGrid(ctx, x, y, size, color);
                    break;
                case 'diagonal':
                    drawDiagonal(ctx, x, y, size, color);
                    break;
                case 'bubbles':
                    drawBubbles(ctx, x, y, size, color);
                    break;
                case 'leaves':
                    drawLeaves(ctx, x, y, size, color);
                    break;
                case 'arrows':
                    drawArrows(ctx, x, y, size, color);
                    break;
                case 'plus':
                    drawPlus(ctx, x, y, size, color);
                    break;
                case 'mandala':
                    drawMandala(ctx, x, y, size, color);
                    break;
                case 'checkerboard':
                    drawCheckerboard(ctx, x, y, size, color);
                    break;
                case 'brick':
                    drawBrick(ctx, x, y, size, color);
                    break;
                case 'honeycomb':
                    drawHoneycomb(ctx, x, y, size, color);
                    break;
                case 'quatrefoil':
                    drawQuatrefoil(ctx, x, y, size, color);
                    break;
                case 'moroccan':
                    drawMoroccan(ctx, x, y, size, color);
                    break;
            }
            
            ctx.globalAlpha = 1;
        }

        // Pattern drawing functions
        function drawDots(ctx, x, y, size, color) {
            const spacing = size / 4;
            for (let dx = -size/2; dx < size/2; dx += spacing) {
                for (let dy = -size/2; dy < size/2; dy += spacing) {
                    ctx.beginPath();
                    ctx.arc(x + dx, y + dy, spacing / 3, 0, Math.PI * 2);
                    ctx.fillStyle = color;
                    ctx.fill();
                }
            }
        }

        function drawCircles(ctx, x, y, size, color) {
            const count = 5;
            for (let i = 0; i < count; i++) {
                ctx.beginPath();
                ctx.arc(x, y, (size / count) * (i + 1), 0, Math.PI * 2);
                ctx.strokeStyle = color;
                ctx.lineWidth = 2;
                ctx.stroke();
            }
        }

        function drawSquares(ctx, x, y, size, color) {
            const spacing = size / 3;
            for (let dx = -size/2; dx < size/2; dx += spacing) {
                for (let dy = -size/2; dy < size/2; dy += spacing) {
                    ctx.fillStyle = color;
                    ctx.fillRect(x + dx, y + dy, spacing * 0.8, spacing * 0.8);
                }
            }
        }

        function drawTriangles(ctx, x, y, size, color) {
            const s = size / 3;
            for (let i = 0; i < 3; i++) {
                ctx.beginPath();
                const angle = (i * 120) * Math.PI / 180;
                const x1 = x + Math.cos(angle) * s;
                const y1 = y + Math.sin(angle) * s;
                const x2 = x + Math.cos(angle + Math.PI * 2/3) * s;
                const y2 = y + Math.sin(angle + Math.PI * 2/3) * s;
                const x3 = x + Math.cos(angle + Math.PI * 4/3) * s;
                const y3 = y + Math.sin(angle + Math.PI * 4/3) * s;
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
                ctx.lineTo(x3, y3);
                ctx.closePath();
                ctx.fillStyle = color;
                ctx.fill();
            }
        }

        function drawHexagons(ctx, x, y, size, color) {
            ctx.beginPath();
            for (let i = 0; i < 6; i++) {
                const angle = (i * 60) * Math.PI / 180;
                const hx = x + Math.cos(angle) * size/2;
                const hy = y + Math.sin(angle) * size/2;
                if (i === 0) ctx.moveTo(hx, hy);
                else ctx.lineTo(hx, hy);
            }
            ctx.closePath();
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.stroke();
        }

        function drawStars(ctx, x, y, size, color) {
            const spikes = 5;
            const outerRadius = size / 2;
            const innerRadius = size / 4;
            
            ctx.beginPath();
            for (let i = 0; i < spikes * 2; i++) {
                const radius = i % 2 === 0 ? outerRadius : innerRadius;
                const angle = (i * Math.PI) / spikes - Math.PI / 2;
                const sx = x + Math.cos(angle) * radius;
                const sy = y + Math.sin(angle) * radius;
                if (i === 0) ctx.moveTo(sx, sy);
                else ctx.lineTo(sx, sy);
            }
            ctx.closePath();
            ctx.fillStyle = color;
            ctx.fill();
        }

        function drawWaves(ctx, x, y, size, color) {
            ctx.beginPath();
            ctx.moveTo(x - size/2, y);
            for (let i = 0; i < 3; i++) {
                const cx = x - size/2 + (size/3) * i;
                ctx.quadraticCurveTo(cx + size/6, y - size/4, cx + size/3, y);
            }
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            ctx.stroke();
        }

        function drawZigzag(ctx, x, y, size, color) {
            ctx.beginPath();
            ctx.moveTo(x - size/2, y);
            for (let i = 0; i < 5; i++) {
                const px = x - size/2 + (size/5) * (i + 1);
                const py = i % 2 === 0 ? y - size/4 : y + size/4;
                ctx.lineTo(px, py);
            }
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            ctx.stroke();
        }

        function drawDiamonds(ctx, x, y, size, color) {
            ctx.beginPath();
            ctx.moveTo(x, y - size/2);
            ctx.lineTo(x + size/2, y);
            ctx.lineTo(x, y + size/2);
            ctx.lineTo(x - size/2, y);
            ctx.closePath();
            ctx.fillStyle = color;
            ctx.fill();
        }

        function drawCrosshatch(ctx, x, y, size, color) {
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            const spacing = size / 5;
            for (let i = -size/2; i < size/2; i += spacing) {
                ctx.beginPath();
                ctx.moveTo(x + i, y - size/2);
                ctx.lineTo(x + i, y + size/2);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(x - size/2, y + i);
                ctx.lineTo(x + size/2, y + i);
                ctx.stroke();
            }
        }

        function drawSpirals(ctx, x, y, size, color) {
            ctx.beginPath();
            for (let i = 0; i < 50; i++) {
                const angle = 0.1 * i;
                const radius = (size / 50) * i;
                const sx = x + Math.cos(angle) * radius;
                const sy = y + Math.sin(angle) * radius;
                if (i === 0) ctx.moveTo(sx, sy);
                else ctx.lineTo(sx, sy);
            }
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.stroke();
        }

        function drawHearts(ctx, x, y, size, color) {
            const width = size / 2;
            const height = size / 2;
            
            ctx.beginPath();
            ctx.moveTo(x, y + height / 4);
            ctx.bezierCurveTo(x, y, x - width / 2, y - height / 2, x - width / 2, y);
            ctx.bezierCurveTo(x - width / 2, y + height / 4, x, y + height / 2, x, y + height);
            ctx.bezierCurveTo(x, y + height / 2, x + width / 2, y + height / 4, x + width / 2, y);
            ctx.bezierCurveTo(x + width / 2, y - height / 2, x, y, x, y + height / 4);
            ctx.fillStyle = color;
            ctx.fill();
        }

        function drawScales(ctx, x, y, size, color) {
            const radius = size / 4;
            for (let i = 0; i < 3; i++) {
                for (let j = 0; j < 3; j++) {
                    const sx = x - size/2 + i * radius;
                    const sy = y - size/2 + j * radius;
                    ctx.beginPath();
                    ctx.arc(sx, sy, radius / 2, 0, Math.PI, true);
                    ctx.strokeStyle = color;
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }
            }
        }

        function drawGrid(ctx, x, y, size, color) {
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            const spacing = size / 5;
            for (let i = 0; i <= 5; i++) {
                const offset = i * spacing - size/2;
                ctx.beginPath();
                ctx.moveTo(x + offset, y - size/2);
                ctx.lineTo(x + offset, y + size/2);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(x - size/2, y + offset);
                ctx.lineTo(x + size/2, y + offset);
                ctx.stroke();
            }
        }

        function drawDiagonal(ctx, x, y, size, color) {
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            const spacing = size / 8;
            for (let i = -size; i < size; i += spacing) {
                ctx.beginPath();
                ctx.moveTo(x - size/2 + i, y - size/2);
                ctx.lineTo(x + size/2 + i, y + size/2);
                ctx.stroke();
            }
        }

        function drawBubbles(ctx, x, y, size, color) {
            const bubbles = 5;
            for (let i = 0; i < bubbles; i++) {
                const bx = x + (Math.random() - 0.5) * size;
                const by = y + (Math.random() - 0.5) * size;
                const radius = Math.random() * size / 5 + 5;
                ctx.beginPath();
                ctx.arc(bx, by, radius, 0, Math.PI * 2);
                ctx.strokeStyle = color;
                ctx.lineWidth = 2;
                ctx.stroke();
            }
        }

        function drawLeaves(ctx, x, y, size, color) {
            for (let i = 0; i < 4; i++) {
                const angle = (i * 90) * Math.PI / 180;
                const lx = x + Math.cos(angle) * size/4;
                const ly = y + Math.sin(angle) * size/4;
                ctx.beginPath();
                ctx.ellipse(lx, ly, size/6, size/3, angle, 0, Math.PI * 2);
                ctx.fillStyle = color;
                ctx.fill();
            }
        }

        function drawArrows(ctx, x, y, size, color) {
            const arrowSize = size / 3;
            for (let i = 0; i < 4; i++) {
                const angle = (i * 90) * Math.PI / 180;
                ctx.save();
                ctx.translate(x, y);
                ctx.rotate(angle);
                ctx.beginPath();
                ctx.moveTo(0, -arrowSize);
                ctx.lineTo(arrowSize/2, 0);
                ctx.lineTo(-arrowSize/2, 0);
                ctx.closePath();
                ctx.fillStyle = color;
                ctx.fill();
                ctx.restore();
            }
        }

        function drawPlus(ctx, x, y, size, color) {
            const width = size / 6;
            const length = size / 2;
            ctx.fillStyle = color;
            ctx.fillRect(x - width/2, y - length/2, width, length);
            ctx.fillRect(x - length/2, y - width/2, length, width);
        }

        function drawMandala(ctx, x, y, size, color) {
            const petals = 8;
            for (let i = 0; i < petals; i++) {
                const angle = (i * 360 / petals) * Math.PI / 180;
                ctx.save();
                ctx.translate(x, y);
                ctx.rotate(angle);
                ctx.beginPath();
                ctx.ellipse(0, -size/4, size/8, size/4, 0, 0, Math.PI * 2);
                ctx.fillStyle = color;
                ctx.fill();
                ctx.restore();
            }
        }

        function drawCheckerboard(ctx, x, y, size, color) {
            const squares = 4;
            const squareSize = size / squares;
            for (let i = 0; i < squares; i++) {
                for (let j = 0; j < squares; j++) {
                    if ((i + j) % 2 === 0) {
                        ctx.fillStyle = color;
                        ctx.fillRect(
                            x - size/2 + i * squareSize,
                            y - size/2 + j * squareSize,
                            squareSize,
                            squareSize
                        );
                    }
                }
            }
        }

        function drawBrick(ctx, x, y, size, color) {
            const brickWidth = size / 3;
            const brickHeight = size / 6;
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            for (let i = 0; i < 3; i++) {
                for (let j = 0; j < 4; j++) {
                    const offset = i % 2 === 0 ? 0 : brickWidth / 2;
                    ctx.strokeRect(
                        x - size/2 + j * brickWidth + offset,
                        y - size/2 + i * brickHeight,
                        brickWidth,
                        brickHeight
                    );
                }
            }
        }

        function drawHoneycomb(ctx, x, y, size, color) {
            const hexSize = size / 4;
            for (let i = 0; i < 2; i++) {
                for (let j = 0; j < 2; j++) {
                    const hx = x - size/4 + i * hexSize * 1.5;
                    const hy = y - size/4 + j * hexSize * Math.sqrt(3) + (i % 2) * hexSize * Math.sqrt(3) / 2;
                    ctx.beginPath();
                    for (let k = 0; k < 6; k++) {
                        const angle = (k * 60) * Math.PI / 180;
                        const px = hx + Math.cos(angle) * hexSize/2;
                        const py = hy + Math.sin(angle) * hexSize/2;
                        if (k === 0) ctx.moveTo(px, py);
                        else ctx.lineTo(px, py);
                    }
                    ctx.closePath();
                    ctx.strokeStyle = color;
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }
            }
        }

        function drawQuatrefoil(ctx, x, y, size, color) {
            const radius = size / 4;
            for (let i = 0; i < 4; i++) {
                const angle = (i * 90) * Math.PI / 180;
                const cx = x + Math.cos(angle) * radius;
                const cy = y + Math.sin(angle) * radius;
                ctx.beginPath();
                ctx.arc(cx, cy, radius, 0, Math.PI * 2);
                ctx.fillStyle = color;
                ctx.fill();
            }
        }

        function drawMoroccan(ctx, x, y, size, color) {
            ctx.beginPath();
            ctx.moveTo(x, y - size/2);
            ctx.quadraticCurveTo(x + size/4, y - size/4, x + size/2, y);
            ctx.quadraticCurveTo(x + size/4, y + size/4, x, y + size/2);
            ctx.quadraticCurveTo(x - size/4, y + size/4, x - size/2, y);
            ctx.quadraticCurveTo(x - size/4, y - size/4, x, y - size/2);
            ctx.closePath();
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            ctx.stroke();
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        function saveImage() {
            const link = document.createElement('a');
            link.download = 'pattern-art.png';
            link.href = canvas.toDataURL();
            link.click();
        }
    </script>
</body>
</html>